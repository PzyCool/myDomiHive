<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - DomiHive</title>
    <link rel="stylesheet" href="/CSS/application-payment.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Payment Main Content -->
    <main class="payment-page">
        <div class="container">
            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="step completed">
                    <div class="step-number">1</div>
                    <div class="step-label">Booking Details</div>
                </div>
                <div class="step completed">
                    <div class="step-number">2</div>
                    <div class="step-label">Document Upload</div>
                </div>
                <div class="step active">
                    <div class="step-number">3</div>
                    <div class="step-label">Payment</div>
                </div>
            </div>

            <!-- Back Navigation -->
            <div class="back-navigation">
                <button class="back-btn" id="backToDocuments">
                    <i class="fas fa-arrow-left"></i>
                    Back to Documents
                </button>
                <div class="payment-context">
                    Step 3: Payment • <span id="paymentContextType">Shortlet Application</span>
                </div>
            </div>

            <!-- Payment Summary -->
            <section class="payment-summary">
                <div class="summary-header">
                    <h1>Complete Your Shortlet Booking Payment</h1>
                    <p>Final step: Secure your short-term stay with payment</p>
                </div>

                <div class="summary-grid">
                    <!-- Booking Summary -->
                    <div class="application-summary-card">
                        <h3>Booking Summary</h3>
                        <div class="summary-details">
                            <div class="detail-item">
                                <span class="detail-label">Guest:</span>
                                <span class="detail-value" id="guestName">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Application ID:</span>
                                <span class="detail-value" id="applicationId">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Property:</span>
                                <span class="detail-value" id="propertyTitle">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Stay Duration:</span>
                                <span class="detail-value" id="stayDuration">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Total Guests:</span>
                                <span class="detail-value" id="totalGuests">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Breakdown -->
                    <div class="payment-breakdown-card">
                        <h3>Payment Breakdown</h3>
                        <div class="breakdown-details">
                            <div class="breakdown-item">
                                <span class="breakdown-label">Shortlet Application Fee</span>
                                <span class="breakdown-amount" id="applicationFee">₦15,000</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">Guest Verification</span>
                                <span class="breakdown-amount" id="verificationFee">₦5,000</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">Security Deposit</span>
                                <span class="breakdown-amount" id="securityDeposit">₦25,000</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">Service Fee</span>
                                <span class="breakdown-amount" id="serviceFee">₦2,500</span>
                            </div>
                            <div class="breakdown-item total">
                                <span class="breakdown-label">Total Amount</span>
                                <span class="breakdown-amount" id="totalAmount">₦47,500</span>
                            </div>
                        </div>
                        <div class="deposit-note">
                            <i class="fas fa-info-circle"></i>
                            <span>Security deposit refundable after stay (subject to property inspection)</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Shortlet Escrow Explanation -->
            <section class="escrow-section">
                <div class="escrow-card">
                    <div class="escrow-header">
                        <div class="escrow-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="escrow-content">
                            <h2>Shortlet Payment Protection</h2>
                            <p>Your payment is protected by DomiHive's shortlet escrow system with guest verification safeguards</p>
                        </div>
                    </div>
                    
                    <div class="escrow-process">
                        <div class="process-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Secure Payment Holding</h4>
                                <p>Your funds are held securely in escrow by DomiHive until check-in</p>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Guest Verification Process</h4>
                                <p>We conduct comprehensive guest verification and ID checks (24-48 hours)</p>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Booking Confirmation</h4>
                                <p>Once verified, your booking is confirmed and property details released</p>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Secure Check-in</h4>
                                <p>Safe and verified check-in process with property access</p>
                            </div>
                        </div>
                        <div class="process-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h4>Deposit Refund After Stay</h4>
                                <p>Security deposit refunded within 24 hours after check-out (if no damages)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Payment Methods -->
            <section class="payment-methods-section">
                <div class="payment-container">
                    <h2>Select Payment Method</h2>
                    <p>Choose your preferred payment method to complete your shortlet booking</p>

                    <form id="shortletPaymentForm" class="payment-form">
                        <input type="hidden" id="applicationData" name="applicationData">
                        <input type="hidden" id="totalPaymentAmount" name="totalPaymentAmount" value="47500">

                        <!-- Payment Method Selection -->
                        <div class="payment-methods">
                            <div class="payment-method-card" data-method="card">
                                <div class="method-header">
                                    <div class="method-icon">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <div class="method-info">
                                        <h4>Credit/Debit Card</h4>
                                        <p>Pay securely with your card</p>
                                    </div>
                                    <div class="method-check">
                                        <div class="check-circle"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="payment-method-card" data-method="bank">
                                <div class="method-header">
                                    <div class="method-icon">
                                        <i class="fas fa-university"></i>
                                    </div>
                                    <div class="method-info">
                                        <h4>Bank Transfer</h4>
                                        <p>Transfer directly from your bank</p>
                                    </div>
                                    <div class="method-check">
                                        <div class="check-circle"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="payment-method-card" data-method="flutterwave">
                                <div class="method-header">
                                    <div class="method-icon">
                                        <i class="fas fa-mobile-alt"></i>
                                    </div>
                                    <div class="method-info">
                                        <h4>Flutterwave</h4>
                                        <p>Pay with mobile money or card</p>
                                    </div>
                                    <div class="method-check">
                                        <div class="check-circle"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="payment-method-card" data-method="paystack">
                                <div class="method-header">
                                    <div class="method-icon">
                                        <i class="fas fa-bolt"></i>
                                    </div>
                                    <div class="method-info">
                                        <h4>Paystack</h4>
                                        <p>Quick and secure payments</p>
                                    </div>
                                    <div class="method-check">
                                        <div class="check-circle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Payment Form -->
                        <div class="payment-details" id="cardDetails">
                            <div class="form-section">
                                <h3>Card Information</h3>
                                <div class="form-grid">
                                    <div class="form-group full-width">
                                        <label for="cardNumber" class="required">Card Number</label>
                                        <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                                        <div class="card-icons">
                                            <i class="fab fa-cc-visa"></i>
                                            <i class="fab fa-cc-mastercard"></i>
                                            <i class="fab fa-cc-amex"></i>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="cardHolder" class="required">Card Holder Name</label>
                                        <input type="text" id="cardHolder" name="cardHolder" placeholder="John Doe" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="expiryDate" class="required">Expiry Date</label>
                                        <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY" maxlength="5" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="cvv" class="required">CVV</label>
                                        <input type="text" id="cvv" name="cvv" placeholder="123" maxlength="4" required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bank Transfer Details -->
                        <div class="payment-details" id="bankDetails">
                            <div class="form-section">
                                <h3>Bank Transfer Instructions</h3>
                                <div class="bank-instructions">
                                    <div class="instruction-item">
                                        <strong>Bank Name:</strong>
                                        <span>DomiHive Shortlet Trust Bank</span>
                                    </div>
                                    <div class="instruction-item">
                                        <strong>Account Number:</strong>
                                        <span id="bankAccountNumber">8325001987</span>
                                        <button type="button" class="copy-btn" onclick="copyToClipboard('bankAccountNumber')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="instruction-item">
                                        <strong>Account Name:</strong>
                                        <span>DomiHive Shortlet Escrow Services</span>
                                    </div>
                                    <div class="instruction-item">
                                        <strong>Reference:</strong>
                                        <span id="paymentReference">DOMI-SHORT-001</span>
                                        <button type="button" class="copy-btn" onclick="copyToClipboard('paymentReference')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="instruction-item">
                                        <strong>Amount:</strong>
                                        <span id="bankAmount">₦47,500</span>
                                    </div>
                                </div>
                                <div class="upload-receipt">
                                    <label for="bankReceipt" class="required">Upload Transfer Receipt</label>
                                    <input type="file" id="bankReceipt" name="bankReceipt" accept=".pdf,.jpg,.jpeg,.png" required>
                                    <span class="file-note">Upload proof of payment after transfer</span>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Gateway Instructions -->
                        <div class="payment-details" id="gatewayDetails">
                            <div class="form-section">
                                <h3>Gateway Payment</h3>
                                <div class="gateway-instructions">
                                    <p>You will be redirected to a secure payment gateway to complete your transaction.</p>
                                    <div class="gateway-features">
                                        <div class="feature">
                                            <i class="fas fa-shield-alt"></i>
                                            <span>Secure encrypted payment</span>
                                        </div>
                                        <div class="feature">
                                            <i class="fas fa-mobile-alt"></i>
                                            <span>Multiple payment options</span>
                                        </div>
                                        <div class="feature">
                                            <i class="fas fa-clock"></i>
                                            <span>Instant confirmation</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Shortlet Terms and Conditions -->
                        <div class="form-section">
                            <div class="terms-agreement">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreeShortletEscrow" name="agreeShortletEscrow" required>
                                    <span class="checkmark"></span>
                                    I understand and agree to the <a href="#" class="terms-link">Shortlet Escrow Terms</a> and DomiHive's payment protection policy
                                </label>
                                
                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreeGuestVerification" name="agreeGuestVerification" required>
                                    <span class="checkmark"></span>
                                    I consent to guest verification, ID checks, and background verification as part of the shortlet booking process
                                </label>
                                
                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreeSecurityDeposit" name="agreeSecurityDeposit" required>
                                    <span class="checkmark"></span>
                                    I understand the ₦25,000 security deposit is refundable after stay completion, subject to property inspection
                                </label>

                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreeCancellationPolicy" name="agreeCancellationPolicy" required>
                                    <span class="checkmark"></span>
                                    I agree to the <a href="#" class="terms-link">Shortlet Cancellation Policy</a> and understand the refund terms
                                </label>

                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreeHouseRules" name="agreeHouseRules" required>
                                    <span class="checkmark"></span>
                                    I agree to abide by all property house rules and terms of stay during my shortlet period
                                </label>

                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreePrivacyPolicy" name="agreePrivacyPolicy" required>
                                    <span class="checkmark"></span>
                                    I agree to the <a href="#" class="terms-link">Privacy Policy</a> and consent to the processing of my payment information
                                </label>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" id="backToDocumentsBtn">
                                <i class="fas fa-arrow-left"></i>
                                Back to Documents
                            </button>
                            <button type="submit" class="btn-primary" id="submitPaymentBtn">
                                <i class="fas fa-lock"></i>
                                Complete Shortlet Payment
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Security & Guest Features -->
            <section class="security-features">
                <div class="security-grid">
                    <div class="security-feature">
                        <div class="feature-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h4>Shortlet Escrow</h4>
                        <p>Funds held securely until check-in</p>
                    </div>
                    <div class="security-feature">
                        <div class="feature-icon">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <h4>Guest Verification</h4>
                        <p>Comprehensive ID and background checks</p>
                    </div>
                    <div class="security-feature">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4>Security Deposit</h4>
                        <p>₦25,000 refundable after stay</p>
                    </div>
                    <div class="security-feature">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h4>Quick Verification</h4>
                        <p>24-48 hour guest verification</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Payment Processing Modal -->
    <div class="modal" id="processingModal">
        <div class="modal-content processing-modal">
            <div class="modal-body">
                <div class="processing-animation">
                    <div class="spinner"></div>
                    <h3>Processing Your Shortlet Payment</h3>
                    <p>Please wait while we securely process your payment and initiate guest verification...</p>
                    <div class="processing-steps">
                        <div class="processing-step active">
                            <i class="fas fa-check"></i>
                            <span>Processing payment transaction</span>
                        </div>
                        <div class="processing-step">
                            <i class="fas fa-check"></i>
                            <span>Securing funds in shortlet escrow</span>
                        </div>
                        <div class="processing-step">
                            <i class="fas fa-check"></i>
                            <span>Initiating guest verification</span>
                        </div>
                        <div class="processing-step">
                            <i class="fas fa-check"></i>
                            <span>Starting ID verification process</span>
                        </div>
                        <div class="processing-step">
                            <i class="fas fa-check"></i>
                            <span>Finalizing booking confirmation</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="success-modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>Shortlet Payment Successful!</h2>
                <button class="close-modal" id="closeModalBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="success-details">
                    <p>Your shortlet payment has been processed successfully and guest verification has been initiated. Your funds are secured in shortlet escrow.</p>
                    <div class="payment-summary-modal">
                        <h4>Shortlet Payment Details:</h4>
                        <div class="detail-item">
                            <strong>Transaction ID:</strong>
                            <span id="transactionId">-</span>
                        </div>
                        <div class="detail-item">
                            <strong>Amount Paid:</strong>
                            <span id="paidAmount">-</span>
                        </div>
                        <div class="detail-item">
                            <strong>Payment Method:</strong>
                            <span id="paymentMethod">-</span>
                        </div>
                        <div class="detail-item">
                            <strong>Escrow Status:</strong>
                            <span class="status-badge pending">Funds in Shortlet Escrow</span>
                        </div>
                        <div class="detail-item">
                            <strong>Guest Verification Status:</strong>
                            <span class="status-badge pending">Verification in Progress</span>
                        </div>
                        <div class="detail-item">
                            <strong>Security Deposit:</strong>
                            <span class="status-badge info">₦25,000 (Refundable)</span>
                        </div>
                    </div>
                    
                    <div class="next-steps">
                        <h4>Guest Verification Process Timeline:</h4>
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="timeline-marker"></div>
                                <div class="timeline-content">
                                    <h5>ID Verification (First 12 hours)</h5>
                                    <p>Verification of all guest identification documents and selfie validation</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-marker"></div>
                                <div class="timeline-content">
                                    <h5>Background Check (Next 12 hours)</h5>
                                    <p>Quick background verification and guest history check</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-marker"></div>
                                <div class="timeline-content">
                                    <h5>Booking Confirmation (24-48 hours)</h5>
                                    <p>Final verification and booking confirmation with property access details</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="deposit-info">
                        <i class="fas fa-info-circle"></i>
                        <div>
                            <strong>Security Deposit Information:</strong>
                            <p>Your ₦25,000 security deposit will be held securely and refunded within 24 hours after check-out, provided there are no damages to the property and all house rules are followed during your stay.</p>
                        </div>
                    </div>

                    <div class="cancellation-notice">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div>
                            <strong>Cancellation Policy:</strong>
                            <p>If guest verification is not completed successfully, your payment (excluding the application fee) will be fully refunded within 24 hours. The ₦15,000 application fee covers verification costs and is non-refundable.</p>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="downloadReceiptBtn">
                        <i class="fas fa-download"></i>
                        Download Booking Receipt
                    </button>
                    <button class="btn-primary" id="goToDashboardBtn">
                        Go to Shortlet Dashboard
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="/JAVASCRIPT/application-payment-shortlet.js"></script>
</body>
</html>